<!doctype html>
<html>
  <head>
      <meta charset="utf-8">
      <link rel="stylesheet" href="style.css">
  </head>
  <body>
    <section>
      <h1>Thermostat </h1>
      <h1 id="temperature"></h1>
      <p>
        <h1 id="temperature"></h1> <h1 id="mode"></h1>
        <h1>Current Outside Temperature: <span id="current-outside-temperature"></span></h1>
        <button id="temperature-up1">+</button>
        <button id="temperature-down1">-</button>
        <button id="temperature-reset">Reset</button>
        power saving mode is <span id="power-saving-status">on</span>
        <button id="powersaving-switch">PSM Switch</button>
      </p>
    </section>
    <script src="jquery.js"></script>
    <script src="src/thermostat.js"></script>
    <script>
      $(document).ready(function(){
        var thermostat = new Thermostat;
        updateTemperature();
        updateMode();
        $.get('http://api.openweathermap.org/data/2.5/weather?q=London,uk&appid=285828e02b448c9f8789b7fca2cf7c74&units=metric', function(data) {
          $('#current-outside-temperature').text(data.main.temp);
          })
        $("#temperature-up1").on("click", function(){ // event listener
          thermostat.up() // update model
          updateTemperature(); // update view
        })
        $("#temperature-down1").on("click", function(){
          thermostat.down()
          updateTemperature(); // update view
        })
        $("#temperature-reset").on("click", function(){
          thermostat.reset()
          updateTemperature(); // update view
        })
        $("#powersaving-switch").on("click", function(){ // event listener
          thermostat.powerSavingSwitch() // update model
          updateTemperature(); // update view
          updateMode();
        })

        function updateTemperature() {
          $("#temperature").text(thermostat.temperature);
          $("#temperature").attr('class', thermostat.energyUsage());
        }
        function updateMode() {
          var status;
          if (thermostat.powerSavingMode === true) {
            status = "On"
          } else {
            status = "Off"
          }
          $("#mode").text("Power Saving Mode: " + status)
        }
      });
    </script>
  </body>
</html>